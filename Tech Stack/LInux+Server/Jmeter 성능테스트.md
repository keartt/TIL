
## 설치 (윈도우, 리눅스)

```sh
wget https://dlcdn.apache.org//jmeter/binaries/apache-jmeter-5.6.3.tgz
tar -xvzf apache-jmeter-5.6.3.tgz
```
> jdk 8 이상 필수
## 테스트 계획 작성
GUI 환경에서 편하게 테스트 계획 작성
- 쓰레드 그룹
	- 쓰레드(말 그대로 쓰레드, 사용자 수임)
	- Ramp-up 시간 몇초 안에 위에서 설정한 쓰레드가 실행되게 할건지
	- 루프 카운트 몇번 반복할건지
	-  `ex)` 30-10-2: 10초 내에 30명 사용자가 접속해서 쓰레드 그룹 내 컨트롤러들을 모두 순차적으로 실행을 한다. (이걸 2번 반복- 쓰레드가 2번 생성되는건 아님 생성된 쓰레드에서 컨트롤러를 2번 실행하는거임)

- 사용자 정의 변수 지정 후 각 요청마다 편하게 사용  `${val}`
- 쓰레드 그룹 설정
	- HTTP 쿠키 관리자 해야지 세션 등 저장됨
- 한번만 실행 컨트롤러
	- 이걸로 로그인, 인증페이지 접속 등 실행
- 단순 컨트롤러에 묶어서 하면 인증같은거 보고서에서 제외할 수 있음
- 보고서
	- 요약, 응답시간 그래프 -> 뻘 하게 많이 사용 간단하게 보기 좋음
	- 결과 트리 -> req, res 응답 보기 쉽게 나타내줌
	- 결과를 파일로 저장하게 설정(리눅스에서 뽑아오기 쉽게)
- HTTP 요청
	- HTTP 헤더 관리자를 통해 json 등 헤더 설정해줌
	- form-data 일 경우 그냥 param 으로 + `application/x-www-form-urlencoded `


> 모든 거에서 ' '공백 하나라도 들가면 오류남 주의

## 리눅스에서 실행

위에서 만든 테스트계획 jmx 파일 리눅스로 옮긴 후
JMeter 디렉토리에서 해당 파일로 실행

``` bash
cd ${zmeter_dir}/bin
./jmeter -n -t ../../CS.test.jmx -l ../../CS.test.jtl
```

## 환경변수 설정
```bash
vi ~/.bashrc
source ~/.bashrc
export PATH=$PATH:/home/yidt/jmeter/apache-jmeter-5.6.3/bin

jmeter -v
jmeter -n -t ./파일명.jmx -l ./파일명.jtl
```

`-n` gui 모드 안쓸거임
`-t` 테스트 계획 파일 내꺼 쓸거임

실행 후 나온 결과를 가지고 GUI 보고서에서 보면 나옴 끄읏

### 테스트 오류시 확인
`Non HTTP response code: org.apache.http.NoHttpResponseException (the target server failed to respond)`
환경설정 바꾸기 [참고](https://invisible-blog.tistory.com/40)

## 쓰레드설정
1. Thread Count (쓰레드 수)
   의미: JMeter에서의 쓰레드는 실제로 가상 사용자를 의미합니다. Thread Count는 동시에 얼마나 많은 가상 사용자가 서버에 요청을 보낼지를 설정합니다.
   예시: Thread Count를 10으로 설정하면, 10명의 가상 사용자가 동시에 서버에 접근하게 됩니다.
2. Ramp-Up Period (램프업 시간)
   의미: 모든 쓰레드(가상 사용자)가 생성되고 시작되기까지 걸리는 시간을 초 단위로 설정합니다. 즉, Thread Count에 지정한 수의 가상 사용자가 몇 초에 걸쳐 점진적으로 시작될지를 결정합니다.
   계산 방법: 예를 들어, Thread Count가 10이고 Ramp-Up Period가 20초로 설정되어 있다면, JMeter는 20초에 걸쳐 10명의 가상 사용자를 균등하게 분배하여 시작합니다. 즉, 매 2초마다 한 명의 가상 사용자가 추가됩니다.
   예시: 만약 Ramp-Up Period가 0이면, 모든 쓰레드가 동시에 시작됩니다. 하지만 일반적으로 서서히 부하를 증가시키기 위해 일정한 Ramp-Up Period를 설정합니다.
3. Loop Count (루프 카운트)
   의미: 각 쓰레드(가상 사용자)가 테스트 스크립트를 몇 번 반복할지를 설정합니다. Loop Count가 1이면, 각 가상 사용자가 스크립트를 한 번만 실행합니다.
   예시: Loop Count를 5로 설정하면, 각 쓰레드는 지정된 테스트 계획을 5번 반복 실행하게 됩니다.


## 요약 보고서
1. 표본 수 (Sample Count)
   의미: 테스트 동안 실행된 HTTP 요청(샘플)의 총 개수입니다. 각 요청이 하나의 샘플로 간주됩니다.
   사용법: 전체 테스트에서 얼마나 많은 요청이 수행되었는지 확인하는 데 사용됩니다. 샘플 수가 많을수록 테스트 결과가 더 신뢰할 수 있습니다.
2. 평균 (Average)
   의미: 각 요청에 대해 응답 시간이 걸린 평균 시간(ms)입니다.
   사용법: 전체 테스트 동안 각 요청이 평균적으로 얼마나 시간이 걸렸는지 파악할 수 있습니다. 성능 병목이 발생했을 가능성이 있는지를 판단하는 데 사용됩니다.
3. 최소 (Min)
   의미: 테스트에서 기록된 요청 중 가장 짧은 응답 시간(ms)입니다.
   사용법: 최소 응답 시간을 통해 가장 최적의 시나리오에서 서버가 얼마나 빠르게 응답하는지 확인할 수 있습니다.
4. 최대 (Max)
   의미: 테스트에서 기록된 요청 중 가장 긴 응답 시간(ms)입니다.
   사용법: 가장 느린 응답 시간을 통해 최악의 시나리오에서 서버가 얼마나 느리게 응답하는지 확인할 수 있습니다. 이는 성능 저하의 원인을 분석하는 데 유용합니다.
5. 표준 편차 (Standard Deviation)
   의미: 평균 응답 시간의 변동성을 나타냅니다. 표준 편차가 낮을수록 응답 시간이 일정하게 유지된다는 의미입니다.
   사용법: 응답 시간의 일관성을 평가할 수 있습니다. 표준 편차가 크면 성능이 일관되지 않다는 것을 의미할 수 있습니다.
6. 오류 % (Error %)
   의미: 전체 요청 중에서 오류가 발생한 요청의 비율을 나타냅니다.
   사용법: 테스트 중 오류 발생률을 확인하여 테스트의 신뢰성을 평가할 수 있습니다. 오류율이 높으면 시스템에 문제가 있을 가능성이 큽니다.
7. 처리량 (Throughput)
   의미: 초당 처리된 요청의 수를 나타냅니다. 일반적으로 requests per second로 표현됩니다.
   사용법: 시스템의 성능을 평가할 때 매우 중요한 지표로, 초당 얼마나 많은 요청을 처리할 수 있는지를 나타냅니다. 처리량이 높을수록 시스템이 많은 요청을 효과적으로 처리할 수 있음을 의미합니다.
8. 수신된 바이트 수 (Received KB/sec)
   의미: 초당 수신된 데이터의 양(KB)입니다.
   사용법: 서버에서 수신한 데이터의 총량을 평가하는 데 사용됩니다. 수신된 데이터가 많으면 응답 데이터가 클 수 있으며, 이는 네트워크 대역폭에 영향을 미칠 수 있습니다.
9. 전송된 바이트 수 (Sent KB/sec)
   의미: 초당 전송된 데이터의 양(KB)입니다.
   사용법: 서버로 전송된 데이터의 총량을 평가하는 데 사용됩니다. 전송된 데이터가 많으면 요청 데이터가 클 수 있으며, 이는 네트워크 대역폭과 서버 부하에 영향을 미칠 수 있습니다.
10. 평균 바이트 수 (Avg. Bytes)
	의미: 각 요청에 대해 전송되고 수신된 데이터의 평균 크기입니다.
	사용법: 응답 크기와 요청 크기를 이해하는 데 도움이 됩니다. 이 지표를 통해 각 요청에 대한 데이터 전송량을 파악할 수 있습니다.